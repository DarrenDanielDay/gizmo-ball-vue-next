var Jt=Object.defineProperty,Ot=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable;var He=(e,t,o)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,B=(e,t)=>{for(var o in t||(t={}))Kt.call(t,o)&&He(e,o,t[o]);if(Te)for(var o of Te(t))Lt.call(t,o)&&He(e,o,t[o]);return e},C=(e,t)=>Ot(e,Ut(t));import{d as H,c as r,a as le,r as ge,b as fe,w as Se,u as Pt,e as U,i as Yt,f as zt,p as jt,g as Vt}from"./vendor.7339a324.js";const Tt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}};Tt();const v=(e,t)=>({x:e,y:t}),Ht=(e,t)=>e.x===t.x&&e.y===t.y,K=Object.freeze(v(0,0)),Ze=Object.freeze(v(1,0)),_e=Object.freeze(v(0,1)),Zt=e=>e.x===0&&e.y===0,L=(e,t)=>v(e.x+t.x,e.y+t.y),qe=e=>v(-e.x,-e.y),h=(e,t)=>v(e.x-t.x,e.y-t.y),N=(e,t)=>v(e.x*t,e.y*t),We=(...e)=>N(e.reduce((t,o)=>L(t,o)),1/e.length),ke=(e,t)=>N(e,t/Ie(e)),D=(e,t)=>e.x*t.x+e.y*t.y,ie=(e,t)=>D(e,t)/Ie(t),te=(e,t)=>N(t,D(e,t)/D(t,t)),Ie=e=>Math.sqrt(D(e,e)),De=(e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),V=e=>v(-e.y,e.x),Xe=(e,t)=>e.x*t.y==t.x*e.y,_t=(e,t)=>Xe(e,t)&&D(e,t)>0,$e=(e,t)=>(t-1+e)%e,qt=(e,t)=>e[$e(e.length,t)],et=(e,t)=>(t+1)%e,Fe=(e,t)=>e[et(e.length,t)],tt=(e,t)=>e[1]>t[0]&&t[1]>e[0],Qe=(e,t,o)=>{const n=e.indexOf(t);return[...e.slice(0,n),o,...e.slice(n+1)]},ot=(e,t)=>e.filter(o=>o!==t),Be={da:K,dp:K,dv:K},we=e=>{throw new Error(e)},nt=Symbol();var R;(function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"})(R||(R={}));var j;(function(e){e[e.Normal=0]="Normal",e[e.Selected=1]="Selected"})(j||(j={}));const Wt=e=>t=>Object.is(t,e),Xt=e=>e===null,$t=e=>!Xt(e)&&typeof e=="object"||typeof e=="function",ue=e=>typeof e=="number",Z=e=>t=>$t(t)&&Object.entries(e).every(([o,n])=>n(Reflect.get(t,o))),eo=(...e)=>t=>e.some(o=>o(t)),to=(...e)=>t=>e.every(o=>o(t)),st=(...e)=>t=>Array.isArray(t)&&t.length===e.length&&e.every((o,n)=>n in t&&o(t[n])),_=to,rt=e=>!e!=!!e,w=e=>e,oo=e=>ue(e)&&Object.values(R).includes(e),P=w(Z({x:ue,y:ue})),q=w(Z({center:P,name:rt,size:P,status:rt})),Ce=w(Z({scale:ue})),de=w(Z({rotation:oo})),se=w(Z({center:P,vertexes:st(P,P,P,P)})),no=w(Z({center:P,vertexes:st(P,P,P)})),at=w(Z({center:P,radius:ue})),so=w(Z({a:P,m:ue,p:P,v:P})),W=(e,t)=>Z({name:Wt(e),collider:t}),ro=w(_(q,W("border",se))),ao=w(_(q,W("ball",at),Z({massPoint:so}))),co=w(_(q,de,Ce,W("absorber",se))),lo=w(_(q,de,Ce,W("triangle",no))),io=w(_(q,de,Ce,W("circle",at))),uo=w(_(q,de,Ce,W("square",se))),po=w(_(q,de,W("pipe",se))),Eo=w(_(q,de,W("pipe-turned",se))),go=w(_(q,W("baffle-alpha",se))),Ao=w(_(q,W("baffle-beta",se))),mo=w(eo(ao,ro,co,lo,io,uo,po,Eo,go,Ao)),fo={async save(e){const t=JSON.stringify(e),o=new Blob([t],{type:"text/plain"}),n=document.createElement("a");n.setAttribute("download","gizmoball-profile.json"),n.setAttribute("href",URL.createObjectURL(o)),n.click()},async load(){const e=typeof window.showOpenFilePicker=="function"?await Io():await Qo();try{const t=JSON.parse(e);return Array.isArray(t)&&t.every(o=>mo(o))?t:Promise.reject("Invalid format.")}catch{return Promise.reject("Invalid json.")}}},Io=async()=>{try{const t=(await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{description:"gizmoball profile",accept:{"application/json":[".json"]}}]}))[0];return t?await(await t.getFile()).text():we("No handle.")}catch(e){if(e instanceof DOMException)return we("User canceled.");throw e}},Qo=async()=>await new Promise((e,t)=>{const o=()=>{s.removeEventListener("change",i)},n=u=>{o(),t(u)},a=u=>{o(),e(u)},s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept",".json");const i=()=>{if(s.files){const u=s.files.item(0);if(u){const l=new FileReader;l.addEventListener("loadend",()=>{const d=l.result;typeof d=="string"?a(d):n("Error occured when read file.")}),l.readAsText(u)}else n("No file selected")}};s.addEventListener("change",i),s.click()}),Bo="_game_161zi_1",Co="_border_161zi_9";var X={game:Bo,border:Co,"right-side":"_right-side_161zi_19","right-top":"_right-top_161zi_35","right-middle":"_right-middle_161zi_43","right-bottom":"_right-bottom_161zi_51"};const ho=10,yo=1,vo=10,bo=5;var ct="/gizmo-ball-vue-next/assets/absorber.42d94e5a.png",Ge="/gizmo-ball-vue-next/assets/ball.58a51e5a.png",lt="/gizmo-ball-vue-next/assets/circle.01b9be0d.png",it="/gizmo-ball-vue-next/assets/pipe_normal.88804e78.png",ut="/gizmo-ball-vue-next/assets/pipe_turned.be96949f.png",Ro="/gizmo-ball-vue-next/assets/select.0cd2f276.png",dt="/gizmo-ball-vue-next/assets/square.7f3460f7.png",pt="/gizmo-ball-vue-next/assets/triangle.1d31c5bf.png",Ne="/gizmo-ball-vue-next/assets/baffle.b8ed02ee.png",Et="/gizmo-ball-vue-next/assets/baffle-mid.0b6ddbe4.png";const Mo={"baffle-alpha":Ne,"baffle-beta":Ne,"pipe-turned":ut,absorber:ct,ball:Ge,border:"",circle:lt,pipe:it,square:dt,triangle:pt},gt={"baffle-alpha":Et,"baffle-beta":Et,"pipe-turned":ut,absorber:ct,ball:Ge,border:"",circle:lt,pipe:it,select:Ro,square:dt,triangle:pt},oe=36,xo=20,So=20,Je={[R.Up]:qe(_e),[R.Right]:Ze,[R.Down]:_e,[R.Left]:qe(Ze)},ko=10,Do=5,Fo=200,he=.025,ye=v(0,15),wo=(e,t)=>{const o=[...Le(e.vertexes),...Le(t.vertexes)],n=Ke(e),a=Ke(t);return o.every(s=>tt(Pe(n,s),Pe(a,s)))},Go=(e,t,o)=>e.every(n=>!Zt(n)&&tt(Oo(t,n),Pe(o,n))),At=(e,t)=>{const o=t.center,n=Ke(e),[a]=mt(n,o),s=Le(e.vertexes);return s.push(h(a,o)),Go(s,t,n)},No=(e,t)=>De(e.center,t.center)<e.radius+t.radius,ve=e=>Array.isArray(e.vertexes),Oe=e=>typeof e.radius=="number",Jo=(e,t)=>{const o=ve(e),n=ve(t),a=Oe(e),s=Oe(t);return o&&n?wo(e,t):a&&s?No(e,t):a&&n?At(t,e):o&&s?At(e,t):we("Unknown collider combination.")},Ue=e=>e.some((t,o)=>{for(let n=o+1;n<e.length;n++){const a=e[n];if(Jo(t,a))return!0}return!1}),Ke=e=>e.vertexes.map(t=>L(e.center,t)),mt=(e,t)=>e.reduce(([o,n,a],s,i)=>{const u=De(s,t),l=n>=u;return[l?s:o,l?u:n,l?i:a]},[null,1/0,-1]),Le=e=>e.map((t,o,n)=>V(h(t,qt(n,o)))),Pe=(e,t)=>{const o=e.map(n=>ie(n,t));return[Math.min(...o),Math.max(...o)]},Oo=(e,t)=>{const o=ie(e.center,t);return[o-e.radius,o+e.radius]},ft=e=>typeof e.rotation=="number",Uo=[R.Up,R.Right,R.Down,R.Left],Ko=e=>{const{collider:t,rotation:o}=e;return C(B({},e),{collider:ve(t)?C(B({},t),{vertexes:t.vertexes.map(n=>V(n))}):t,rotation:Fe(Uo,o)})},It=e=>typeof e.scale=="number",Qt=(e,t)=>h(e,N(t,.5)),Lo=(e,t)=>L(e,N(t,.5)),Bt=(e,t,o)=>N(N(e,1/t),o),Ct=(e,t)=>{const{collider:o,scale:n,size:a,center:s}=e,i=Qt(s,a),u=t(n),l=Bt(a,n,u),d=Lo(i,l);return C(B({},e),{scale:u,size:l,center:d,collider:Oe(o)?C(B({},o),{center:d,radius:o.radius/n*u}):ve(o)?C(B({},o),{center:d,vertexes:o.vertexes.map(m=>Bt(m,n,u))}):o})},Po=e=>e+1,Yo=e=>Math.max(1,e-1),zo=["ball","baffle-alpha","baffle-beta"],ht=e=>zo.some(t=>t===e.name),jo=e=>!ht(e),Vo=(e,t)=>{if(e.name==="ball")return C(B({},e),{center:t,collider:C(B({},e.collider),{center:t}),massPoint:C(B({},e.massPoint),{p:t})});const o=h(t,e.center);return C(B({},e),{center:t,collider:C(B({},e.collider),{center:L(e.collider.center,o)})})},yt=e=>{const t=V(Je[e.rotation]),o=V(t);return[t,o]},To=(e,t)=>{const{v:o}=e;if(D(o,t)<0){const n=N(te(o,t),-2);return{dp:K,dv:n,da:K}}return Be},Ho=(e,t)=>{const o=h(t.p,e.p),{v:n,m:a}=e,{v:s,m:i}=t,u=h(n,s);if(D(o,u)>0){const l=te(n,o),d=te(s,o),m=a+i,c=2*i/m,E=2*a/m,M=N(h(d,l),c),Q=N(h(l,d),E);return[{dp:K,dv:M,da:K},{dp:K,dv:Q,da:K}]}return[Be,Be]},Zo=(e,t)=>{const o=Ie(e);return o>t?N(e,t/o):e},_o=e=>{const{v:t,a:o}=e;return{da:K,dv:h(Zo(L(t,N(o,he)),Fo),t),dp:L(N(t,he),N(o,he*he/2))}},qo=(e,t)=>C(B({},e),{p:L(e.p,t.dp),v:L(e.v,t.dv),a:L(e.a,t.da)}),re=(e,t)=>{const o=qo(e.massPoint,t);return C(B({},e),{center:o.p,collider:C(B({},e.collider),{center:o.p}),massPoint:o})},vt=e=>{const t=e.vertexes.map(i=>L(i,e.center)),o=e.vertexes.map((i,u,l)=>h(i,Fe(l,u))),n=t.map((i,u,l)=>We(i,Fe(l,u))),a=o.map(i=>V(i)),s=t.map((i,u)=>ie(i,a[u]));return{absoluteVertexes:t,edges:o,middles:n,axes:a,pointProjections:s}},Wo=(e,t,o,n)=>{const a=e.map(c=>_o(c.massPoint)),s=e.map((c,E)=>re(c,a[E])),i=new Map(n.entries());for(const c of t)i.set(c,vt(c.collider));const u=new Array(e.length).fill(!1),l=e.map(()=>({arc:[],inner:[],entry:[],edge:[],point:[],ball:[]}));for(let c=0;c<s.length;c++){const E=s[c],{collider:M}=E,{center:Q,radius:f}=M;e:for(const p of[...o,...t]){if(p.name==="circle"){const{center:y,radius:G}=p.collider,z=h(Q,y);Ie(z)<G+f&&l[c].arc.push({type:"arc",item:p,axis:z});continue}const{absoluteVertexes:A,edges:b,axes:I,pointProjections:S}=i.get(p),F=A.length,[,O,x]=mt(A,Q),k=$e(F,x),Y=et(F,x);let g=0;for(const[y,G]of[[k,x],[x,Y]]){const z=h(Q,A[y]),T=h(Q,A[G]),ne=b[y],ee=I[y];if(D(z,ee)<=0){g++;continue}if(D(z,ne)<0&&0<D(T,ne)&&f>Math.abs(S[y]-ie(Q,ee))){if(p.name==="absorber"){u[c]=!0;continue e}else if(p.name==="pipe"){if(Xe(ee,Je[p.rotation])){l[c].entry.push({type:"entry",index:y,item:p,axis:ee});continue e}}else if(p.name==="pipe-turned"&&yt(p).some(Nt=>_t(Nt,ee))){l[c].entry.push({type:"entry",index:y,item:p,axis:ee});continue e}l[c].edge.push({type:"edge",item:p,index:y,point:A[y]});continue e}}if(g===2&&(p.name==="pipe"||p.name==="pipe-turned")){l[c].inner.push({type:"inner",item:p});continue}if(O<f){p.name==="absorber"?u[c]=!0:l[c].point.push({type:"point",item:p,point:A[x],index:x});continue}}for(let p=c+1;p<s.length;p++){const A=s[p],{collider:b}=A,{center:I,radius:S}=b;De(Q,I)<f+S&&l[c].ball.push({type:"ball",item:e[p],axis:h(Q,I),index:p})}}const d=s.slice();for(let c=0;c<d.length;c++){const E=d[c],M=l[c].ball;for(const Q of M){const{index:f}=Q;if(l[c].inner.length!==l[f].inner.length)continue;const p=d[f],[A,b]=Ho(E.massPoint,p.massPoint);d[c]=re(E,A),d[f]=re(p,b)}}const m=d.map((c,E)=>{const{arc:M,edge:Q,point:f}=l[E];return[...M.map(p=>p.axis),...Q.map(p=>i.get(p.item).axes[p.index]),...f.reduce((p,A)=>(Q.every(b=>!Ht(b.point,A.point))&&p.push(h(c.center,A.point)),p),[])]});for(let c=0;c<d.length;c++){const E=d[c],{entry:M,inner:Q}=l[c],f=m[c],{massPoint:p}=E,{v:A}=p;if(M.length){const b=M[0],{middles:I,edges:S}=i.get(b.item),F=I[b.index],O=h(F,E.center),x=S[c];if(Math.abs(ie(O,x))<ko&&D(b.axis,A)<0){const k=te(O,x),Y=D(A,A)+2*D(ye,k);if(Y>0){const g=Math.sqrt(Y),y=ke(te(A,b.axis),g),G=h(y,A);d[c]=re(E,{da:K,dp:k,dv:G});continue}}else Q.length||f.push(b.axis)}if(Q.length){const b=Q[0],{item:I}=b,S=h(I.center,E.center);if(I.name==="pipe"){const F=Je[I.rotation],O=V(F),x=te(S,O),k=D(A,A)+2*D(ye,x);if(k>0){const Y=Math.sqrt(k),g=ke(te(A,F),Y),y=h(g,A);d[c]=re(E,{da:K,dp:x,dv:y})}}else{const[F,O]=yt(I),x=Math.abs(D(F,A)),k=Math.abs(D(O,A)),[Y,g]=x>k?[F,O]:[O,F];if(Math.abs(ie(S,Y))<Do&&D(Y,A)<0){const y=te(S,Y),G=D(A,A)+2*D(ye,y);if(G>0){const z=Math.sqrt(G),T=ke(g,z),ne=h(T,A);d[c]=re(E,{da:K,dp:y,dv:ne})}}}}d[c]=re(d[c],f.length?To(E.massPoint,We(...f)):Be)}return d.filter((c,E)=>!u[E])};var ae;(function(e){e[e.Play=0]="Play",e[e.Layout=1]="Layout"})(ae||(ae={}));var $;(function(e){e.AlphaLeft="a",e.AlphaRight="d",e.BetaLeft="j",e.BetaRight="l"})($||($={}));const bt=(e,t)=>{e.setData("application/gizmo.mapitem",JSON.stringify(t))},Xo=e=>{try{return JSON.parse(e.getData("application/gizmo.mapitem"))}catch{return}};var $o="/gizmo-ball-vue-next/assets/grid.f4a14502.png";const be=e=>Object.fromEntries(Object.entries(e).map(([t,o])=>[t,typeof o=="number"?`${o}px`:o])),en="_selected_1ncon_21";var ce={"map-item":"_map-item_1ncon_1","map-item-boarder":"_map-item-boarder_1ncon_9",selected:en,"rotate-up":"_rotate-up_1ncon_31","rotate-right":"_rotate-right_1ncon_37","rotate-down":"_rotate-down_1ncon_45","rotate-left":"_rotate-left_1ncon_53"};const tn={[R.Up]:ce["rotate-up"],[R.Down]:ce["rotate-down"],[R.Right]:ce["rotate-right"],[R.Left]:ce["rotate-left"]},Ye=H({props:{mapItem:{type:Object,required:!0},onClick:{type:Function}},setup(e){return()=>{const{mapItem:t,onClick:o}=e,{center:n,size:a,status:s,name:i}=t,u=Qt(n,a),l=ft(t)?t.rotation:R.Up,d={left:u.x,top:u.y,width:a.x,height:a.y},m=s===j.Selected,c=E=>{bt(E.dataTransfer,{item:t,from:"panel",pickedUpPosition:v(E.pageX,E.pageY)})};return i==="border"?null:r("img",{draggable:m,class:le(ce["map-item-boarder"],s===j.Selected&&ce.selected,ce["map-item"],tn[l]),onClick:o,style:be(d),onDragstart:c,src:Mo[i]},null)}}}),Re=(e,t)=>{const o=V(t),n=V(o),a=V(n);return{center:e,vertexes:[t,o,n,a]}},on=(e,t)=>{const o=V(t),n=V(o);return{center:e,vertexes:[t,o,n]}},Rt=(e,t,o)=>{const n=N(L(t,o),.5),a=h(n,t),s=h(a,o),i=L(s,t);return{center:e,vertexes:[n,a,s,i]}},Mt=(e,t)=>({center:e,radius:t}),Ae=e=>v(e,e),xt=(e,t)=>{switch(e){case"ball":case"absorber":case"triangle":case"circle":case"square":case"pipe":case"pipe-turned":return v(t,t);case"baffle-alpha":case"baffle-beta":return v(t*2,t);default:throw new Error(`Unknown map item name: ${e}`)}},ze=(e,t,o)=>{const n={center:t,status:j.Normal,size:xt(e,o)};switch(e){case"ball":return C(B({name:"ball"},n),{collider:Mt(t,o/2),massPoint:{a:ye,m:1,p:t,v:K}});case"absorber":return C(B({name:"absorber"},n),{collider:Re(t,Ae(o/2)),rotation:R.Up,scale:1});case"triangle":return C(B({name:"triangle"},n),{collider:on(t,Ae(o/2)),rotation:R.Up,scale:1});case"circle":return C(B({name:"circle"},n),{collider:Mt(t,o/2),rotation:R.Up,scale:1});case"square":return C(B({name:"square"},n),{collider:Re(t,Ae(o/2)),rotation:R.Up,scale:1});case"pipe":return C(B({name:"pipe"},n),{collider:Re(t,Ae(o/2)),rotation:R.Up});case"pipe-turned":return C(B({name:"pipe-turned"},n),{collider:Re(t,Ae(o/2)),rotation:R.Up});case"baffle-alpha":case"baffle-beta":const a=h(t,v(0,3*o/8));return C(B({name:e},n),{collider:Rt(a,v(o*2,0),v(0,o/4))});default:throw new Error(`Unknown map item name: ${e}`)}},nn=(e,t,o)=>{const n=t*e,a=o*e,s=[[1,0,0,-1],[0,1,1,0],[1,0,0,1],[0,1,-1,0]],i=[];for(const[u,l,d,m]of s){const c=v((u*n+d*e)/2+(d>0?n:0),(l*a+m*e)/2+(m>0?a:0)),E=v(u*n+(1-u)*e,l*a+(1-l)*e);i.push({center:c,size:E,collider:Rt(c,v(E.x,0),v(0,E.y)),name:"border",status:j.Normal})}return i},St=oe/2,sn=(e,t)=>{const{center:o}=e,n={left:`${o.x-St}px`,top:`${o.y-St}px`};Object.assign(t.style,n)},rn=ze("baffle-alpha",K,oe),an=rn.size.x/2,cn=(e,t)=>{const{center:o}=e,n={left:`${o.x-an}px`};Object.assign(t.style,n)};var pe={"game-panel":"_game-panel_1skfh_1","game-grid":"_game-grid_1skfh_9"};const je={backgroundImage:`url(${$o})`},ln=e=>e.preventDefault(),un=H({props:{mapItems:{type:Object,required:!0},onMapItemsChange:{type:Function},onDropItem:{type:Function},onClick:{type:Function}},setup(e){const t=ge(null);return()=>{const{mapItems:o,onMapItemsChange:n,onDropItem:a,onClick:s}=e,i=l=>{const d=Xo(l.dataTransfer),m=t.value;if(!d||!m)return;const c=v(m.offsetLeft,m.offsetTop),E=L(d.item.center,c),{pickedUpPosition:M=E}=d,Q=h(M,E),f=v(l.pageX,l.pageY),p=h(f,c);a==null||a(d,h(p,Q))},u=l=>{const d=t.value,m=v(d.offsetLeft,d.offsetTop),c=v(l.pageX,l.pageY),E=h(c,m);s==null||s(E)};return r("div",{class:pe["game-panel"]},[r("div",{ref:t,class:pe["game-grid"],style:be(je),onDragover:ln,onDrop:i,onClick:u},[o.map((l,d)=>r(Ye,{key:d,mapItem:l,onClick:()=>{n==null||n(Qe(o.map(m=>m===l?l:C(B({},m),{status:j.Normal})),l,C(B({},l),{status:l.status===j.Selected?j.Normal:j.Selected})))}},null))])])}}}),dn=H({props:{statics:{type:Array,required:!0},movables:{type:Array,required:!0},paused:{type:Boolean,required:!0}},setup(e){const t=ge(e.movables),o=fe(()=>e.paused);return Se(o,(n,a,s)=>{n||s(kt(t.value,e.statics,(i,u)=>{t.value=[...i,...u]}))},{immediate:!0}),()=>{const{statics:n}=e;return r("div",{class:pe["game-panel"]},[r("div",{class:pe["game-grid"],style:be(je)},[[...n,...t.value].map((a,s)=>r(Ye,{mapItem:a,key:s},null))])])}}}),pn=H({props:{statics:{type:Array,required:!0},movables:{type:Array,required:!0},paused:{type:Boolean,required:!0}},setup(e){const t=ge(null),o=fe(()=>e.paused);return Se([o,t],([n,a],s,i)=>{if(!n&&a){const u=Array.from(a.querySelectorAll("img")),l=u.filter(m=>m.src.includes(Ge)),d=u.filter(m=>m.src.includes(Ne));i(kt(e.movables,e.statics,(m,c)=>{for(let E=0;E<d.length;E++){const M=d[E],Q=m[E];cn(Q,M)}for(let E=0;E<l.length;E++){const M=l[E],Q=c[E];Q?sn(Q,M):M.style.display="none"}}))}},{immediate:!0}),()=>{const{movables:n,statics:a}=e;return r("div",{class:pe["game-panel"]},[r("div",{class:pe["game-grid"],style:be(je),ref:t},[[...a,...n].map((s,i)=>r(Ye,{mapItem:s,key:i},null))])])}}}),kt=(e,t,o)=>{let n=e.filter(f=>f.name==="ball"),a=e.filter(f=>f.name==="baffle-alpha"||f.name==="baffle-beta");const s=t.reduce((f,p)=>(p.name!=="circle"&&f.set(p,vt(p.collider)),f),new Map),i=setInterval(()=>{n=Wo(n,a,t,s)},yo),u={[$.AlphaLeft]:!1,[$.AlphaRight]:!1,[$.BetaLeft]:!1,[$.BetaRight]:!1},l=f=>f in u,d=f=>p=>{const{key:A}=p;l(A)&&(u[A]=f)},m=d(!0),c=d(!1);window.addEventListener("keydown",m),window.addEventListener("keyup",c);const E=(f,p,A)=>{const{center:b,collider:I}=f,S=N(v(bo,0),+A-+p),F=L(b,S),O=L(I.center,S);return C(B({},f),{center:F,collider:C(B({},I),{center:O})})},M=setInterval(()=>{const{a:f,d:p,j:A,l:b}=u,I=[[f,p,"baffle-alpha"],[A,b,"baffle-beta"]];for(const[S,F,O]of I)if(S!==F){const x=a.map(k=>k.name===O?E(k,S,F):k);!Ue([...x,...t].map(k=>k.collider))&&!Ue([...x,...n].map(k=>k.collider))&&(a=x)}},vo),Q=setInterval(()=>{o(a,n)},ho);return()=>{clearInterval(i),clearInterval(Q),clearInterval(M),window.removeEventListener("keydown",m),window.removeEventListener("keyup",c)}},En="_tooltip_t2emm_1";var Ve={"tooltip-host":"_tooltip-host_t2emm_1",tooltip:En,"tooltip-content":"_tooltip-content_t2emm_15"};const me=H({props:{tooltip:{type:Object,required:!0}},setup(e){const t=Pt();return()=>{var n;const{tooltip:o}=e;return r("div",{class:Ve["tooltip-host"]},[r("div",{class:Ve.tooltip},[r("div",{class:Ve["tooltip-content"]},[o])]),(n=t.default)==null?void 0:n.call(t)])}}}),gn="_item_1vs3o_1",An="_img_1vs3o_31";var Ee={"item-zone":"_item-zone_1vs3o_1","two-item":"_two-item_1vs3o_9",item:gn,img:An,"baffle-control-hint":"_baffle-control-hint_1vs3o_43"};function mn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Yt(e)}const fn=[["select","ball"],["absorber","triangle"],["circle","square"],["pipe","pipe-turned"],["baffle-alpha","baffle-beta"]],In=H({props:{itemName:{type:String,required:!0},setItemName:{type:Function}},setup(e){return()=>{const{itemName:t,setItemName:o}=e;return r("div",{class:Ee["item-zone"]},[r("span",null,[U("Item Collection")]),r("table",{width:"250px"},[r("tbody",null,[fn.map((n,a)=>r("tr",{key:a,class:Ee["two-item"]},[n.map((s,i)=>r("td",{key:i},[r("label",{class:Ee.item},[r("input",{name:"chooseItem",checked:s===t,type:"radio",value:s,onInput:u=>o==null?void 0:o(s)},null),Qn(s)])]))]))])])])}}}),Qn=e=>{if(e==="select")return r("img",{class:Ee.img,src:gt.select},null);const t=r("img",{class:Ee.img,onDragstart:o=>{bt(o.dataTransfer,{item:ze(e,K,oe),from:"collection"})},src:gt[e]},null);return e==="baffle-alpha"?Dt($.AlphaLeft,$.AlphaRight,t):e==="baffle-beta"?Dt($.BetaLeft,$.BetaRight,t):t},Dt=(e,t,o)=>r(me,{tooltip:r("div",{class:Ee["baffle-control-hint"]},[r("p",null,[U("Play Mode Control Key:")]),r("p",null,[U("Key "),r("kbd",null,[e.toUpperCase()]),U(" For moving left")]),r("p",null,[U("Key "),r("kbd",null,[t.toUpperCase()]),U(" For moving right")])])},mn(o)?o:{default:()=>[o]});var Bn="data:image/png;base64,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",Cn="/gizmo-ball-vue-next/assets/remove.d026aad9.png",hn="/gizmo-ball-vue-next/assets/rotate.0326717b.png",yn="data:image/png;base64,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";const vn="_tool_1v0ww_1";var Me={tool:vn};const bn=H({props:{onRotate:{type:Function},onRemove:{type:Function},onZoomIn:{type:Function},onZoomOut:{type:Function}},setup(e){return()=>{const{onRotate:t,onRemove:o,onZoomIn:n,onZoomOut:a}=e;return r("div",null,[r("span",null,[U("Tool Collection")]),r("table",{width:"250px"},[r("tbody",null,[r("tr",null,[r("td",null,[r(me,{tooltip:r("kbd",null,[U("R")])},{default:()=>[r("img",{class:Me.tool,src:hn,onClick:t},null)]})]),r("td",null,[r(me,{tooltip:r("kbd",null,[U("Del")])},{default:()=>[r("img",{class:Me.tool,src:Cn,onClick:o},null)]})])]),r("tr",null,[r("td",null,[r(me,{tooltip:r("kbd",null,[U("=")])},{default:()=>[r("img",{class:Me.tool,src:Bn,onClick:n},null)]})]),r("td",null,[r(me,{tooltip:r("kbd",null,[U("-")])},{default:()=>[r("img",{class:Me.tool,src:yn,onClick:a},null)]})])])])])])}}});var Rn="/gizmo-ball-vue-next/assets/pause.3e03e548.png",Mn="/gizmo-ball-vue-next/assets/resume.ec37c40c.png",Ft="data:image/png;base64,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";const xn="_show_1n2d7_11",Sn="_hide_1n2d7_17",kn="_button_1n2d7_43",Dn="_span_1n2d7_67";var J={"mode-zone":"_mode-zone_1n2d7_1",show:xn,hide:Sn,"control-row":"_control-row_1n2d7_23","mode-col":"_mode-col_1n2d7_37",button:kn,"controll-img":"_controll-img_1n2d7_57",span:Dn};const Fn=H({props:{mode:{type:Number,required:!0},domMode:{type:Boolean,required:!0},paused:{type:Boolean,required:!0},toggleDomMode:{type:Function},togglePaused:{type:Function},handleLayoutMode:{type:Function},handlePlayMode:{type:Function},handleSave:{type:Function},handleLoad:{type:Function}},setup(e){return()=>{const{mode:t,domMode:o,paused:n,toggleDomMode:a,togglePaused:s,handleLayoutMode:i,handlePlayMode:u,handleSave:l,handleLoad:d}=e,m=t===ae.Play;return r("div",{class:J["mode-zone"]},[r("span",null,[U("Controls")]),r("div",null,[r("div",{class:J["control-row"]},[r("img",{src:Ft,class:m?J.hide:J.show,height:"20"},null),r("button",{class:J.button,onClick:i},[U("Layout Mode")]),r("div",null,null)]),r("div",{class:J["control-row"]},[r("img",{src:Ft,class:m?J.show:J.hide,height:"20"},null),r("button",{class:J.button,onClick:u},[U("Play Mode")]),r("img",{class:le(J["controll-img"],m?J.show:J.hide),height:"30",src:n?Mn:Rn,onClick:s},null)]),r("div",{class:J["control-row"]},[r("div",null,null),r("button",{class:J.button,onClick:l},[U("Save")]),r("div",null,null)]),r("div",{class:J["control-row"]},[r("div",null,null),r("button",{class:J.button,onClick:d},[U("Load")]),r("div",null,null)])]),r("span",{onClick:a,class:J.span},[o?"GIZMO BALL DOM":"GIZMO BALL VUE"])])}}}),xe=e=>{const t=ge(e);return[t,o=>t.value=typeof o=="function"?o(t.value):o]},wn=(e,t)=>{const o=ge(t);return[o,()=>o.value=e(o.value)]},wt=(e,t,o)=>{const n=N(t,.5),{x:a,y:s}=h(e,n),i=v(Math.round(a/o)*o,Math.round(s/o)*o);return L(i,n)},Gt=e=>!e,Gn=()=>{},Nn=H({setup(){const e=zt(nt),[t,o]=xe("select"),[n,a]=xe(nn(oe,xo,So)),s=g=>a(y=>{const G=typeof g=="function"?g(y):g;return Ue(G.map(T=>T.collider))?y:G}),[i,u]=xe(ae.Layout),[l,d]=xe(!1),m=()=>{u(ae.Layout),d(!1)},c=()=>{u(ae.Play)},[E,M]=wn(Gt,!1),Q=()=>{e.load().then(g=>{s(g)}).catch(g=>{alert(g)})},f=()=>{e.save(n.value).catch(g=>{alert(g)})},p=()=>d(Gt),A=g=>{const y=t.value;y!=="select"&&s(G=>[...G,ze(y,wt(g,xt(y,oe),oe),oe)])},b=fe(()=>i.value===ae.Layout),I=fe(()=>n.value.find(g=>g.status===j.Selected)),S=g=>()=>b.value?g():Gn(),F=S(()=>{s(g=>I.value&&ft(I.value)?Qe(g,I.value,Ko(I.value)):g)}),O=(g,y)=>{const{item:G,from:z}=g;s(T=>{const ne=wt(y,G.size,oe),ee=Vo(G,ne);return[...z==="panel"&&I.value?ot(T,I.value):T,ee]})},x=S(()=>{s(g=>I.value?ot(g,I.value):g)}),k=S(()=>{s(g=>I.value&&It(I.value)?Qe(g,I.value,Ct(I.value,Po)):g)}),Y=S(()=>{s(g=>I.value&&It(I.value)?Qe(g,I.value,Ct(I.value,Yo)):g)});return Se(b,(g,y,G)=>{if(g){const z=T=>{switch(T.key.toLocaleLowerCase()){case"delete":x();break;case"r":F();break;case"=":k();break;case"-":Y();break}};window.addEventListener("keydown",z),G(()=>{window.removeEventListener("keydown",z)})}}),()=>r("div",{class:X.game},[r("div",{class:X.border},[b.value?r(un,{mapItems:n.value,onMapItemsChange:s,onClick:A,onDropItem:O},null):Jn(E.value,l.value,n.value)]),r("div",{class:le(X["right-side"],X.border)},[r("div",{class:le(X["right-top"],X.border)},[r(In,{itemName:t.value,setItemName:o},null)]),r("div",{class:le(X["right-middle"],X.border)},[r(bn,{onRotate:F,onRemove:x,onZoomIn:k,onZoomOut:Y},null)]),r("div",{class:le(X["right-bottom"],X.border)},[r(Fn,{mode:i.value,domMode:E.value,paused:l.value,toggleDomMode:M,togglePaused:p,handleLayoutMode:m,handlePlayMode:c,handleLoad:Q,handleSave:f},null)])])])}}),Jn=(e,t,o)=>{const n=o.filter(ht).map(s=>C(B({},s),{status:j.Normal})),a=o.filter(jo).map(s=>C(B({},s),{status:j.Normal}));return e?r(pn,{paused:t,movables:n,statics:a},null):r(dn,{paused:t,movables:n,statics:a},null)},On=H({setup(){return jt(nt,fo),()=>r("div",{id:"game-container"},[r(Nn,null,null)])}});Vt(On).mount("#app");
